<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Browser TTS Voices</title>
</head>
<body>
  <h2>Test Available Voices</h2>
  <select id="voiceSelect"></select>
  <input type="text" id="ttsText" value="This is a test of the selected voice." style="width:300px;">
  <button onclick="testVoice()">Speak</button>
  <pre id="voiceInfo" style="margin-top:1em;"></pre>
  <script>
    function populateVoiceList() {
      const select = document.getElementById('voiceSelect');
      select.innerHTML = '';
      const voices = window.speechSynthesis.getVoices();
      voices.forEach((voice, i) => {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `${voice.name} (${voice.lang})${voice.default ? ' [default]' : ''}`;
        select.appendChild(option);
      });
      document.getElementById('voiceInfo').textContent = JSON.stringify(voices, null, 2);
    }
    window.speechSynthesis.onvoiceschanged = populateVoiceList;
    window.addEventListener('DOMContentLoaded', populateVoiceList);

    function testVoice() {
      const voices = window.speechSynthesis.getVoices();
      const idx = document.getElementById('voiceSelect').value;
      const text = document.getElementById('ttsText').value;
      const utter = new SpeechSynthesisUtterance(text);
      utter.voice = voices[idx];
      window.speechSynthesis.cancel();
      window.speechSynthesis.speak(utter);
    }
  </script>
</body>
</html>